# Minimal - just structure, ApplicationSet provides real values
# Required
app:
  name: "wopr-baseapp"

#Required
image:
  registry: ghcr.io
  repository: "travismontana/wopr/wopr-api"
  tag: latest
  pullPolicy: IfNotPresent

# Optional
# service:
#   type: ClusterIP
#   port: 8989

#pvc:
#  storageClass: ""
#  size: 1Gi
#  accessMode: ReadWriteOnce

#volumes:
#  nfs:
#    server: "a"
#    path: "/a"
#  mountPath: /media

#env:
#  TZ: "America/Chicago"
#  PUID: "1000"
#  PGID: "1000"
env:
    - name: OTEL_TRACES_EXPORTER
      value: otlp
    - name: OTEL_METRICS_EXPORTER
      value: otlp
    - name: OTEL_EXPORTER_OTLP_PROTOCOL
      value: http/protobuf
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: https://otel.monitoring.abode.tailandtraillabs.org

# labels: 
#   app.wopr.io/hasNginx: "true"

#podAnnotations: 
#  prometheus.io/scrape: "true"
#  prometheus.io/port: "4318"
#  prometheus.io/path: "/v1/metrics"

resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

ingress:
  enabled: false
  className: "studio-traefik"
  annotations: {}
  hosts: 
    - host: chart-example.local
      paths: 
        - path: /
          pathType: Prefix 
  tls:
    - secretName: chart-example-tls
      hosts:
        - chart-example.local

nodeSelector: {}
tolerations: []
affinity: {}

livenessProbe:
  enabled: true  # Default to enabled
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  enabled: true
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
# secrets:
#   # Basic auth (stringData)
# - name: wopr-db-credentials
#    enabled: true
#    type: kubernetes.io/basic-auth
#    username: dbuser
#      password: supersecret
#
#   # TLS cert (data - base64 encoded)
#   - name: wopr-tls
#     enabled: true
#     type: kubernetes.io/tls
#     data:
#       tls.crt: LS0tLS1CRUdJTi...  # base64 cert
#       tls.key: LS0tLS1CRUdJTi...  # base64 key
#
#   # Docker registry (data)
#   - name: registry-creds
#     enabled: true
#     type: kubernetes.io/dockerconfigjson
#     data:
#       .dockerconfigjson: eyJhdXRocyI6e...  # base64 config
#
#   # SSH key (data)
#   - name: git-ssh-key
#     enabled: true
#     type: kubernetes.io/ssh-auth
#     data:
#       ssh-privatekey: LS0tLS1CRUdJTi...  # base64 key
#
#   # Generic opaque (mix both if you want)
#   - name: app-config
#     enabled: true
#     type: Opaque
#     stringData:
#       config.yaml: |
#         some: config
#     data:
#       binary-blob: U29tZSBiaW5hcnk=
securityContext:
  runAsNonRoot: true
  runAsUser: 2222
  runAsGroup: 2222
  fsGroup: 2222