wopr-baseapp:
  app:
    name: wopr-api
  replicaCount: 1

  image:
    registry: ghcr.io
    repository: travismontana/wopr/wopr-api
    tag: latest
    pullPolicy: Always

  service:
    type: ClusterIP
    port: 8000

  ingress:
    enabled: true
    className: wopr-traefik
    hosts:
      - host: api.wopr.tailandtraillabs.org
        paths:
          - path: /
            pathType: Prefix
    tls: 
      - secretName: wopr-api-tls
        hosts:
          - api.wopr.tailandtraillabs.org
  
  env:
    - name: DBUSER
      valueFrom:
        secretKeyRef:
          name: wopr-config-db-user-credentials
          key: username
    - name: DBPASSWORD
      valueFrom:
        secretKeyRef:
          name: wopr-config-db-user-credentials
          key: password
    - name: DBHOST
      valueFrom:
        secretKeyRef:
          name: wopr-db-cluster-app
          key: host
    - name: DBPORT
      valueFrom:
        secretKeyRef:
          name: wopr-db-cluster-app
          key: port
    - name: DBNAME
      value: "wopr-db-database"
  woprConfig:
    WOPR_VERSION: "v0.1.4-alpha"
    WOPR_METADATA_DB: "wopr-db"
    WOPR_API_URL: "http://wopr-api.wopr.svc:8000"
